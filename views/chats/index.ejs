<%- include('../partials/html-head') %>
<%- include('../partials/nav') %>
<link rel="stylesheet" href="/stylesheets/chats/index.css" />
<main>
<div id="topSpaceBuffer"></div>
<div class="chat-container">
  <!-- Left Sidebar: List of Chats -->
  <div class="chat-sidebar">
    <h2>Chats</h2>
    <ul class="chat-list">
      <% chats.forEach(chat => { %>
        <li>
          <a href="#" onclick="loadChat('<%= chat._id %>')">
            <%= chat.user1.name %> and <%= chat.user2.name %>
          </a>
        </li>
      <% }); %>
    </ul>
  </div>

  <!-- Right Content: Chat History and Input -->
  <div class="chat-content">
    <div id="chat-history"></div>
    <div class="chat-input">
      <input id="message-input" type="text" placeholder="Type a message..." />
      <button onclick="sendMessage()">Send</button>
    </div>

 
 
</div>

<script>
  // Function to load chat history for a specific chat
  function loadChat(chatId) {
    // AJAX request or Socket.IO to load chat history and update #chat-history
    // Example: $.get(`/chats/${chatId}`, data => $('#chat-history').html(data));
  }

  // Function to send a message
  function sendMessage() {
    const message = $('#message-input').val();
    // AJAX request or Socket.IO to send the message
    // Example: $.post('/sendMessage', { chatId: currentChat._id, message });
  }
</script>
<%- include('../partials/footer') %>
</main>

